//	ObjectTalk Scripting Language
//	Copyright (c) 1993-2026 Johan A. Goossens. All rights reserved.
//
//	This work is licensed under the terms of the MIT license.
//	For a copy, see <https://opensource.org/licenses/MIT>.


//
//	Do not edit this file, it is automatically generated
//


#pragma once


//
//	Include files
//

#include "OtFaust.h"


//
//  OtReverb
//

static double OtReverb_faustpower2_f(double value) {
	return value * value;
}

class OtReverb : public OtFaust {
protected:
	int IOTA0;
	double fVec0[8192];
	int fSampleRate;
	double fConst0;
	double fConst1;
	double fConst2;
	double fConst3;
	double fConst4;
	double fConst5;
	double fConst6;
	double fConst7;
	float fVslider0;
	double fConst8;
	double fRec10[2];
	double fConst9;
	double fConst10;
	int iConst11;
	int iConst12;
	int iConst13;
	int iConst14;
	int iConst15;
	int iConst16;
	int iConst17;
	int iConst18;
	double fVec1[2048];
	int iConst19;
	double fVec2[4096];
	int iConst20;
	double fVec3[4096];
	int iConst21;
	double fVec4[8192];
	int iConst22;
	double fVec5[4096];
	int iConst23;
	double fVec6[8192];
	int iConst24;
	double fVec7[4096];
	int iConst25;
	double fVec8[8192];
	int iConst26;
	double fVec9[2048];
	int iConst27;
	double fVec10[4096];
	int iConst28;
	double fVec11[4096];
	int iConst29;
	double fVec12[4096];
	int iConst30;
	double fVec13[4096];
	int iConst31;
	double fVec14[4096];
	int iConst32;
	double fVec15[4096];
	int iConst33;
	double fVec16[8192];
	int iConst34;
	double fVec17[2048];
	double fVec18[16384];
	double fConst35;
	float fVslider1;
	double fRec11[2];
	double fVec19[2];
	double fRec9[2];
	double fRec1[2];
	double fVec20[4096];
	double fVec21[16384];
	double fVec22[2];
	double fRec12[2];
	double fRec2[2];
	double fVec23[4096];
	int iConst36;
	double fVec24[16384];
	double fVec25[2];
	double fRec13[2];
	double fRec3[2];
	double fVec26[4096];
	int iConst37;
	double fVec27[16384];
	double fVec28[2];
	double fRec14[2];
	double fRec4[2];
	double fVec29[4096];
	int iConst38;
	double fVec30[16384];
	double fVec31[2];
	double fRec15[2];
	double fRec5[2];
	double fVec32[8192];
	int iConst39;
	double fVec33[16384];
	double fVec34[2];
	double fRec16[2];
	double fRec6[2];
	double fVec35[8192];
	int iConst40;
	double fVec36[16384];
	double fVec37[2];
	double fRec17[2];
	double fRec7[2];
	double fVec38[8192];
	int iConst41;
	double fVec39[16384];
	double fVec40[2];
	double fRec18[2];
	double fRec8[2];
	double fVec41[2];
	double fRec0[2];
	float fVslider2;
	double fRec19[2];
	
 public:
	OtReverb() {
	}
	
	OtReverb(const OtReverb&) = default;
	
	virtual ~OtReverb() = default;
	
	OtReverb& operator=(const OtReverb&) = default;
	
	void metadata(Meta* m) override { 
		m->declare("aanl.lib/ADAA1:author", "Dario Sanfilippo");
		m->declare("aanl.lib/ADAA1:copyright", "Copyright (C) 2021 Dario Sanfilippo     <sanfilippo.dario@gmail.com>");
		m->declare("aanl.lib/ADAA1:license", "MIT License");
		m->declare("aanl.lib/hardclip:author", "Dario Sanfilippo");
		m->declare("aanl.lib/hardclip:copyright", "Copyright (C) 2021 Dario Sanfilippo     <sanfilippo.dario@gmail.com>");
		m->declare("aanl.lib/hardclip:license", "MIT License");
		m->declare("aanl.lib/name", "Faust Antialiased Nonlinearities");
		m->declare("aanl.lib/version", "1.4.2");
		m->declare("basics.lib/name", "Faust Basic Element Library");
		m->declare("basics.lib/version", "1.22.0");
		m->declare("category", "Reverb");
		m->declare("compile_options", "-lang cpp -fpga-mem-th 4 -ct 1 -cn OtReverb -scn OtFaust -es 1 -mcd 16 -mdd 1024 -mdy 33 -double -ftz 0");
		m->declare("delays.lib/name", "Faust Delay Library");
		m->declare("delays.lib/version", "1.2.0");
		m->declare("filename", "OtReverb.dsp");
		m->declare("filters.lib/highpass:author", "Julius O. Smith III");
		m->declare("filters.lib/highpass:copyright", "Copyright (C) 2003-2019 by Julius O. Smith III <jos@ccrma.stanford.edu>");
		m->declare("filters.lib/lowpass0_highpass1", "MIT-style STK-4.3 license");
		m->declare("filters.lib/lowpass0_highpass1:author", "Julius O. Smith III");
		m->declare("filters.lib/lowpass:author", "Julius O. Smith III");
		m->declare("filters.lib/lowpass:copyright", "Copyright (C) 2003-2019 by Julius O. Smith III <jos@ccrma.stanford.edu>");
		m->declare("filters.lib/lowpass:license", "MIT-style STK-4.3 license");
		m->declare("filters.lib/name", "Faust Filters Library");
		m->declare("filters.lib/tf1:author", "Julius O. Smith III");
		m->declare("filters.lib/tf1:copyright", "Copyright (C) 2003-2019 by Julius O. Smith III <jos@ccrma.stanford.edu>");
		m->declare("filters.lib/tf1:license", "MIT-style STK-4.3 license");
		m->declare("filters.lib/tf1s:author", "Julius O. Smith III");
		m->declare("filters.lib/tf1s:copyright", "Copyright (C) 2003-2019 by Julius O. Smith III <jos@ccrma.stanford.edu>");
		m->declare("filters.lib/tf1s:license", "MIT-style STK-4.3 license");
		m->declare("filters.lib/version", "1.7.1");
		m->declare("license", "MIT");
		m->declare("maths.lib/author", "GRAME");
		m->declare("maths.lib/copyright", "GRAME");
		m->declare("maths.lib/license", "LGPL with exception");
		m->declare("maths.lib/name", "Faust Math Library");
		m->declare("maths.lib/version", "2.9.0");
		m->declare("name", "Spring Reverb");
		m->declare("platform.lib/name", "Generic Platform Library");
		m->declare("platform.lib/version", "1.3.0");
		m->declare("reverbs.lib/name", "Faust Reverb Library");
		m->declare("reverbs.lib/springreverb:author", "Daniel Leonov");
		m->declare("reverbs.lib/version", "1.5.1");
		m->declare("routes.lib/hadamard:author", "Remy Muller, revised by Romain Michon");
		m->declare("routes.lib/name", "Faust Signal Routing Library");
		m->declare("routes.lib/version", "1.2.0");
		m->declare("signals.lib/name", "Faust Signal Routing Library");
		m->declare("signals.lib/version", "1.6.0");
	}

	int getNumInputs() override {
		return 1;
	}
	int getNumOutputs() override {
		return 1;
	}
	
	static void classInit([[maybe_unused]] int sample_rate) {
	}
	
	virtual void instanceConstants([[maybe_unused]] int sample_rate) {
		fSampleRate = sample_rate;
		fConst0 = std::min<double>(1.92e+05, std::max<double>(1.0, static_cast<double>(fSampleRate)));
		fConst1 = 1.0 / std::tan(471.23889803846896 / fConst0);
		fConst2 = 1.0 / (fConst1 + 1.0);
		fConst3 = 1.0 - fConst1;
		fConst4 = 1.0 / std::tan(20420.352248333656 / fConst0);
		fConst5 = 1.0 / (fConst4 + 1.0);
		fConst6 = 1.0 - fConst4;
		fConst7 = 44.1 / fConst0;
		fConst8 = 1.0 - fConst7;
		fConst9 = std::round(0.035 * fConst0);
		fConst10 = std::max<double>(0.0, fConst9);
		iConst11 = static_cast<int>(std::min<double>(std::round(0.05 * fConst0), fConst10));
		iConst12 = static_cast<int>(std::min<double>(fConst9, fConst10));
		iConst13 = static_cast<int>(std::min<double>(std::round(0.0425 * fConst0), fConst10));
		iConst14 = static_cast<int>(std::min<double>(std::round(0.0275 * fConst0), fConst10));
		iConst15 = static_cast<int>(std::min<double>(std::round(0.04625 * fConst0), fConst10));
		iConst16 = static_cast<int>(std::min<double>(std::round(0.03125 * fConst0), fConst10));
		iConst17 = static_cast<int>(std::min<double>(std::round(0.03875 * fConst0), fConst10));
		iConst18 = static_cast<int>(std::min<double>(std::round(0.02375 * fConst0), fConst10));
		iConst19 = static_cast<int>(std::min<double>(std::round(0.009 * fConst0), fConst10));
		iConst20 = static_cast<int>(std::min<double>(std::round(0.019499999999999997 * fConst0), fConst10));
		iConst21 = static_cast<int>(std::min<double>(std::round(0.014249999999999999 * fConst0), fConst10));
		iConst22 = static_cast<int>(std::min<double>(std::round(0.02475 * fConst0), fConst10));
		iConst23 = static_cast<int>(std::min<double>(std::round(0.011625 * fConst0), fConst10));
		iConst24 = static_cast<int>(std::min<double>(std::round(0.022125 * fConst0), fConst10));
		iConst25 = static_cast<int>(std::min<double>(std::round(0.016875 * fConst0), fConst10));
		iConst26 = static_cast<int>(std::min<double>(std::round(0.027374999999999997 * fConst0), fConst10));
		iConst27 = static_cast<int>(std::min<double>(std::round(0.01 * fConst0), fConst10));
		iConst28 = static_cast<int>(std::min<double>(std::round(0.0175 * fConst0), fConst10));
		iConst29 = static_cast<int>(std::min<double>(std::round(0.01375 * fConst0), fConst10));
		iConst30 = static_cast<int>(std::min<double>(std::round(0.02125 * fConst0), fConst10));
		iConst31 = static_cast<int>(std::min<double>(std::round(0.011875 * fConst0), fConst10));
		iConst32 = static_cast<int>(std::min<double>(std::round(0.019375000000000003 * fConst0), fConst10));
		iConst33 = static_cast<int>(std::min<double>(std::round(0.015625 * fConst0), fConst10));
		iConst34 = static_cast<int>(std::min<double>(std::round(0.023125 * fConst0), fConst10));
		fConst35 = std::round(0.08 * fConst0);
		iConst36 = static_cast<int>(std::min<double>(std::round(0.01475 * fConst0), fConst10));
		iConst37 = static_cast<int>(std::min<double>(std::round(0.017625000000000002 * fConst0), fConst10));
		iConst38 = static_cast<int>(std::min<double>(std::round(0.020499999999999997 * fConst0), fConst10));
		iConst39 = static_cast<int>(std::min<double>(std::round(0.023375 * fConst0), fConst10));
		iConst40 = static_cast<int>(std::min<double>(std::round(0.026250000000000002 * fConst0), fConst10));
		iConst41 = static_cast<int>(std::min<double>(std::round(0.029124999999999998 * fConst0), fConst10));
	}
	
	virtual void instanceResetUserInterface() {
		fVslider0 = static_cast<float>(0.2);
		fVslider1 = static_cast<float>(0.0);
		fVslider2 = static_cast<float>(0.5);
	}
	
	virtual void instanceClear() {
		IOTA0 = 0;
		for (int l0 = 0; l0 < 8192; l0 = l0 + 1) {
			fVec0[l0] = 0.0;
		}
		for (int l1 = 0; l1 < 2; l1 = l1 + 1) {
			fRec10[l1] = 0.0;
		}
		for (int l2 = 0; l2 < 2048; l2 = l2 + 1) {
			fVec1[l2] = 0.0;
		}
		for (int l3 = 0; l3 < 4096; l3 = l3 + 1) {
			fVec2[l3] = 0.0;
		}
		for (int l4 = 0; l4 < 4096; l4 = l4 + 1) {
			fVec3[l4] = 0.0;
		}
		for (int l5 = 0; l5 < 8192; l5 = l5 + 1) {
			fVec4[l5] = 0.0;
		}
		for (int l6 = 0; l6 < 4096; l6 = l6 + 1) {
			fVec5[l6] = 0.0;
		}
		for (int l7 = 0; l7 < 8192; l7 = l7 + 1) {
			fVec6[l7] = 0.0;
		}
		for (int l8 = 0; l8 < 4096; l8 = l8 + 1) {
			fVec7[l8] = 0.0;
		}
		for (int l9 = 0; l9 < 8192; l9 = l9 + 1) {
			fVec8[l9] = 0.0;
		}
		for (int l10 = 0; l10 < 2048; l10 = l10 + 1) {
			fVec9[l10] = 0.0;
		}
		for (int l11 = 0; l11 < 4096; l11 = l11 + 1) {
			fVec10[l11] = 0.0;
		}
		for (int l12 = 0; l12 < 4096; l12 = l12 + 1) {
			fVec11[l12] = 0.0;
		}
		for (int l13 = 0; l13 < 4096; l13 = l13 + 1) {
			fVec12[l13] = 0.0;
		}
		for (int l14 = 0; l14 < 4096; l14 = l14 + 1) {
			fVec13[l14] = 0.0;
		}
		for (int l15 = 0; l15 < 4096; l15 = l15 + 1) {
			fVec14[l15] = 0.0;
		}
		for (int l16 = 0; l16 < 4096; l16 = l16 + 1) {
			fVec15[l16] = 0.0;
		}
		for (int l17 = 0; l17 < 8192; l17 = l17 + 1) {
			fVec16[l17] = 0.0;
		}
		for (int l18 = 0; l18 < 2048; l18 = l18 + 1) {
			fVec17[l18] = 0.0;
		}
		for (int l19 = 0; l19 < 16384; l19 = l19 + 1) {
			fVec18[l19] = 0.0;
		}
		for (int l20 = 0; l20 < 2; l20 = l20 + 1) {
			fRec11[l20] = 0.0;
		}
		for (int l21 = 0; l21 < 2; l21 = l21 + 1) {
			fVec19[l21] = 0.0;
		}
		for (int l22 = 0; l22 < 2; l22 = l22 + 1) {
			fRec9[l22] = 0.0;
		}
		for (int l23 = 0; l23 < 2; l23 = l23 + 1) {
			fRec1[l23] = 0.0;
		}
		for (int l24 = 0; l24 < 4096; l24 = l24 + 1) {
			fVec20[l24] = 0.0;
		}
		for (int l25 = 0; l25 < 16384; l25 = l25 + 1) {
			fVec21[l25] = 0.0;
		}
		for (int l26 = 0; l26 < 2; l26 = l26 + 1) {
			fVec22[l26] = 0.0;
		}
		for (int l27 = 0; l27 < 2; l27 = l27 + 1) {
			fRec12[l27] = 0.0;
		}
		for (int l28 = 0; l28 < 2; l28 = l28 + 1) {
			fRec2[l28] = 0.0;
		}
		for (int l29 = 0; l29 < 4096; l29 = l29 + 1) {
			fVec23[l29] = 0.0;
		}
		for (int l30 = 0; l30 < 16384; l30 = l30 + 1) {
			fVec24[l30] = 0.0;
		}
		for (int l31 = 0; l31 < 2; l31 = l31 + 1) {
			fVec25[l31] = 0.0;
		}
		for (int l32 = 0; l32 < 2; l32 = l32 + 1) {
			fRec13[l32] = 0.0;
		}
		for (int l33 = 0; l33 < 2; l33 = l33 + 1) {
			fRec3[l33] = 0.0;
		}
		for (int l34 = 0; l34 < 4096; l34 = l34 + 1) {
			fVec26[l34] = 0.0;
		}
		for (int l35 = 0; l35 < 16384; l35 = l35 + 1) {
			fVec27[l35] = 0.0;
		}
		for (int l36 = 0; l36 < 2; l36 = l36 + 1) {
			fVec28[l36] = 0.0;
		}
		for (int l37 = 0; l37 < 2; l37 = l37 + 1) {
			fRec14[l37] = 0.0;
		}
		for (int l38 = 0; l38 < 2; l38 = l38 + 1) {
			fRec4[l38] = 0.0;
		}
		for (int l39 = 0; l39 < 4096; l39 = l39 + 1) {
			fVec29[l39] = 0.0;
		}
		for (int l40 = 0; l40 < 16384; l40 = l40 + 1) {
			fVec30[l40] = 0.0;
		}
		for (int l41 = 0; l41 < 2; l41 = l41 + 1) {
			fVec31[l41] = 0.0;
		}
		for (int l42 = 0; l42 < 2; l42 = l42 + 1) {
			fRec15[l42] = 0.0;
		}
		for (int l43 = 0; l43 < 2; l43 = l43 + 1) {
			fRec5[l43] = 0.0;
		}
		for (int l44 = 0; l44 < 8192; l44 = l44 + 1) {
			fVec32[l44] = 0.0;
		}
		for (int l45 = 0; l45 < 16384; l45 = l45 + 1) {
			fVec33[l45] = 0.0;
		}
		for (int l46 = 0; l46 < 2; l46 = l46 + 1) {
			fVec34[l46] = 0.0;
		}
		for (int l47 = 0; l47 < 2; l47 = l47 + 1) {
			fRec16[l47] = 0.0;
		}
		for (int l48 = 0; l48 < 2; l48 = l48 + 1) {
			fRec6[l48] = 0.0;
		}
		for (int l49 = 0; l49 < 8192; l49 = l49 + 1) {
			fVec35[l49] = 0.0;
		}
		for (int l50 = 0; l50 < 16384; l50 = l50 + 1) {
			fVec36[l50] = 0.0;
		}
		for (int l51 = 0; l51 < 2; l51 = l51 + 1) {
			fVec37[l51] = 0.0;
		}
		for (int l52 = 0; l52 < 2; l52 = l52 + 1) {
			fRec17[l52] = 0.0;
		}
		for (int l53 = 0; l53 < 2; l53 = l53 + 1) {
			fRec7[l53] = 0.0;
		}
		for (int l54 = 0; l54 < 8192; l54 = l54 + 1) {
			fVec38[l54] = 0.0;
		}
		for (int l55 = 0; l55 < 16384; l55 = l55 + 1) {
			fVec39[l55] = 0.0;
		}
		for (int l56 = 0; l56 < 2; l56 = l56 + 1) {
			fVec40[l56] = 0.0;
		}
		for (int l57 = 0; l57 < 2; l57 = l57 + 1) {
			fRec18[l57] = 0.0;
		}
		for (int l58 = 0; l58 < 2; l58 = l58 + 1) {
			fRec8[l58] = 0.0;
		}
		for (int l59 = 0; l59 < 2; l59 = l59 + 1) {
			fVec41[l59] = 0.0;
		}
		for (int l60 = 0; l60 < 2; l60 = l60 + 1) {
			fRec0[l60] = 0.0;
		}
		for (int l61 = 0; l61 < 2; l61 = l61 + 1) {
			fRec19[l61] = 0.0;
		}
	}
	
	void init([[maybe_unused]] int sample_rate) override {
		classInit(sample_rate);
		instanceInit(sample_rate);
	}
	
	virtual void instanceInit([[maybe_unused]] int sample_rate) {
		instanceConstants(sample_rate);
		instanceResetUserInterface();
		instanceClear();
	}
	
	virtual OtReverb* clone() {
		return new OtReverb(*this);
	}
	
	int getSampleRate() override {
		return fSampleRate;
	}
		
	void compute(int count, [[maybe_unused]] float** inputs, float** outputs) override {
		float* input0 = inputs[0];
		float* output0 = outputs[0];
		double fSlow0 = fConst7 * static_cast<double>(fVslider0);
		double fSlow1 = fConst7 * static_cast<double>(fVslider1);
		double fSlow2 = fConst7 * static_cast<double>(fVslider2);
		for (int i0 = 0; i0 < count; i0 = i0 + 1) {
			double fTemp0 = static_cast<double>(input0[i0]);
			fVec0[IOTA0 & 8191] = fTemp0;
			double fTemp1 = fRec1[1] + fRec5[1];
			double fTemp2 = fRec7[1] + fTemp1 + fRec3[1];
			fRec10[0] = fSlow0 + fConst8 * fRec10[1];
			double fTemp3 = std::max<double>(0.0, std::min<double>(1e+01, 1e+01 * fRec10[0]));
			double fTemp4 = fTemp3 * (0.013 - 0.0006 * fTemp3) + 0.26;
			double fTemp5 = fVec0[(IOTA0 - iConst11) & 8191];
			double fTemp6 = fVec0[(IOTA0 - iConst12) & 8191];
			double fTemp7 = fTemp5 + fTemp6;
			double fTemp8 = fVec0[(IOTA0 - iConst13) & 8191];
			double fTemp9 = fVec0[(IOTA0 - iConst14) & 8191];
			double fTemp10 = fTemp8 + fTemp9;
			double fTemp11 = fTemp7 + fTemp10;
			double fTemp12 = fVec0[(IOTA0 - iConst15) & 8191];
			double fTemp13 = fVec0[(IOTA0 - iConst16) & 8191];
			double fTemp14 = fTemp12 + fTemp13;
			double fTemp15 = fVec0[(IOTA0 - iConst17) & 8191];
			double fTemp16 = fVec0[(IOTA0 - iConst18) & 8191];
			double fTemp17 = fTemp15 + fTemp16;
			double fTemp18 = fTemp14 + fTemp17;
			fVec1[IOTA0 & 2047] = fTemp11 + fTemp18;
			double fTemp19 = fVec1[(IOTA0 - iConst19) & 2047];
			double fTemp20 = fTemp5 - fTemp6;
			double fTemp21 = fTemp8 - fTemp9;
			double fTemp22 = fTemp20 + fTemp21;
			double fTemp23 = fTemp12 - fTemp13;
			double fTemp24 = fTemp15 - fTemp16;
			double fTemp25 = fTemp23 + fTemp24;
			fVec2[IOTA0 & 4095] = fTemp22 + fTemp25;
			double fTemp26 = fVec2[(IOTA0 - iConst20) & 4095];
			double fTemp27 = fTemp19 - fTemp26;
			double fTemp28 = fTemp7 - fTemp10;
			double fTemp29 = fTemp14 - fTemp17;
			fVec3[IOTA0 & 4095] = fTemp28 + fTemp29;
			double fTemp30 = fVec3[(IOTA0 - iConst21) & 4095];
			double fTemp31 = fTemp20 - fTemp21;
			double fTemp32 = fTemp23 - fTemp24;
			fVec4[IOTA0 & 8191] = fTemp31 + fTemp32;
			double fTemp33 = fVec4[(IOTA0 - iConst22) & 8191];
			double fTemp34 = fTemp30 - fTemp33;
			double fTemp35 = fTemp27 + fTemp34;
			fVec5[IOTA0 & 4095] = fTemp11 - fTemp18;
			double fTemp36 = fVec5[(IOTA0 - iConst23) & 4095];
			fVec6[IOTA0 & 8191] = fTemp22 - fTemp25;
			double fTemp37 = fVec6[(IOTA0 - iConst24) & 8191];
			double fTemp38 = fTemp36 - fTemp37;
			fVec7[IOTA0 & 4095] = fTemp28 - fTemp29;
			double fTemp39 = fVec7[(IOTA0 - iConst25) & 4095];
			fVec8[IOTA0 & 8191] = fTemp31 - fTemp32;
			double fTemp40 = fVec8[(IOTA0 - iConst26) & 8191];
			double fTemp41 = fTemp39 - fTemp40;
			double fTemp42 = fTemp38 - fTemp41;
			fVec9[IOTA0 & 2047] = fTemp35 - fTemp42;
			double fTemp43 = fVec9[(IOTA0 - iConst27) & 2047];
			double fTemp44 = fTemp19 + fTemp26;
			double fTemp45 = fTemp30 + fTemp33;
			double fTemp46 = fTemp44 + fTemp45;
			double fTemp47 = fTemp36 + fTemp37;
			double fTemp48 = fTemp39 + fTemp40;
			double fTemp49 = fTemp47 - fTemp48;
			fVec10[IOTA0 & 4095] = fTemp46 - fTemp49;
			double fTemp50 = fVec10[(IOTA0 - iConst28) & 4095];
			double fTemp51 = fTemp43 - fTemp50;
			double fTemp52 = fTemp27 - fTemp34;
			double fTemp53 = fTemp38 + fTemp41;
			fVec11[IOTA0 & 4095] = fTemp52 - fTemp53;
			double fTemp54 = fVec11[(IOTA0 - iConst29) & 4095];
			double fTemp55 = fTemp44 - fTemp45;
			double fTemp56 = fTemp47 + fTemp48;
			fVec12[IOTA0 & 4095] = fTemp55 - fTemp56;
			double fTemp57 = fVec12[(IOTA0 - iConst30) & 4095];
			double fTemp58 = fTemp54 + fTemp57;
			double fTemp59 = fTemp51 - fTemp58;
			fVec13[IOTA0 & 4095] = fTemp35 + fTemp42;
			double fTemp60 = fVec13[(IOTA0 - iConst31) & 4095];
			fVec14[IOTA0 & 4095] = fTemp46 + fTemp49;
			double fTemp61 = fVec14[(IOTA0 - iConst32) & 4095];
			double fTemp62 = fTemp60 + fTemp61;
			fVec15[IOTA0 & 4095] = fTemp52 + fTemp53;
			double fTemp63 = fVec15[(IOTA0 - iConst33) & 4095];
			fVec16[IOTA0 & 8191] = fTemp55 + fTemp56;
			double fTemp64 = fVec16[(IOTA0 - iConst34) & 8191];
			double fTemp65 = fTemp63 + fTemp64;
			double fTemp66 = fTemp62 - fTemp65;
			fVec17[IOTA0 & 2047] = fTemp59 - fTemp66;
			fVec18[IOTA0 & 16383] = (fRec8[1] + fRec4[1] + fRec6[1] + fTemp2 + fRec2[1]) * fTemp4 - 0.01 * fVec17[(IOTA0 - iConst19) & 2047];
			fRec11[0] = fSlow1 + fConst8 * fRec11[1];
			double fTemp67 = std::max<double>(0.0, std::min<double>(1e+01, 1e+01 * fRec11[0]));
			double fTemp68 = fTemp67 * (0.00032 * fTemp67 + -0.0072);
			double fTemp69 = fVec18[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.070028)))))) & 16383];
			fVec19[0] = fTemp69;
			fRec9[0] = -(fConst5 * (fConst6 * fRec9[1] - (fTemp69 + fVec19[1])));
			double fTemp70 = fRec9[0] - fRec9[1];
			fRec1[0] = ((std::fabs(fTemp70) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec9[0] + fRec9[1]))) : ((((fRec9[0] <= 1.0) & (fRec9[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec9[0]) : fRec9[0] * static_cast<double>((fRec9[0] > 0.0) - (fRec9[0] < 0.0)) + -0.5) - (((fRec9[1] <= 1.0) & (fRec9[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec9[1]) : fRec9[1] * static_cast<double>((fRec9[1] > 0.0) - (fRec9[1] < 0.0)) + -0.5)) / fTemp70);
			fVec20[IOTA0 & 4095] = fTemp59 + fTemp66;
			fVec21[IOTA0 & 16383] = fTemp4 * (fTemp2 - (fRec8[1] + fRec2[1] + fRec6[1] + fRec4[1])) + 0.01 * fVec20[(IOTA0 - iConst31) & 4095];
			double fTemp71 = fVec21[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07005600000000001)))))) & 16383];
			fVec22[0] = fTemp71;
			fRec12[0] = -(fConst5 * (fConst6 * fRec12[1] - (fTemp71 + fVec22[1])));
			double fTemp72 = fRec12[0] - fRec12[1];
			fRec2[0] = ((std::fabs(fTemp72) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec12[0] + fRec12[1]))) : ((((fRec12[0] <= 1.0) & (fRec12[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec12[0]) : fRec12[0] * static_cast<double>((fRec12[0] > 0.0) - (fRec12[0] < 0.0)) + -0.5) - (((fRec12[1] <= 1.0) & (fRec12[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec12[1]) : fRec12[1] * static_cast<double>((fRec12[1] > 0.0) - (fRec12[1] < 0.0)) + -0.5)) / fTemp72);
			double fTemp73 = fRec3[1] + fRec7[1];
			double fTemp74 = fTemp51 + fTemp58;
			double fTemp75 = fTemp62 + fTemp65;
			fVec23[IOTA0 & 4095] = fTemp74 - fTemp75;
			fVec24[IOTA0 & 16383] = fTemp4 * (fRec6[1] + fTemp1 + fRec2[1] - (fRec8[1] + fTemp73 + fRec4[1])) + 0.01 * fVec23[(IOTA0 - iConst36) & 4095];
			double fTemp76 = fVec24[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07008400000000001)))))) & 16383];
			fVec25[0] = fTemp76;
			fRec13[0] = -(fConst5 * (fConst6 * fRec13[1] - (fTemp76 + fVec25[1])));
			double fTemp77 = fRec13[0] - fRec13[1];
			fRec3[0] = ((std::fabs(fTemp77) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec13[0] + fRec13[1]))) : ((((fRec13[0] <= 1.0) & (fRec13[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec13[0]) : fRec13[0] * static_cast<double>((fRec13[0] > 0.0) - (fRec13[0] < 0.0)) + -0.5) - (((fRec13[1] <= 1.0) & (fRec13[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec13[1]) : fRec13[1] * static_cast<double>((fRec13[1] > 0.0) - (fRec13[1] < 0.0)) + -0.5)) / fTemp77);
			fVec26[IOTA0 & 4095] = fTemp74 + fTemp75;
			fVec27[IOTA0 & 16383] = fTemp4 * (fRec8[1] + fTemp1 + fRec4[1] - (fRec6[1] + fTemp73 + fRec2[1])) - 0.01 * fVec26[(IOTA0 - iConst37) & 4095];
			double fTemp78 = fVec27[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07014000000000001)))))) & 16383];
			fVec28[0] = fTemp78;
			fRec14[0] = -(fConst5 * (fConst6 * fRec14[1] - (fTemp78 + fVec28[1])));
			double fTemp79 = fRec14[0] - fRec14[1];
			fRec4[0] = ((std::fabs(fTemp79) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec14[0] + fRec14[1]))) : ((((fRec14[0] <= 1.0) & (fRec14[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec14[0]) : fRec14[0] * static_cast<double>((fRec14[0] > 0.0) - (fRec14[0] < 0.0)) + -0.5) - (((fRec14[1] <= 1.0) & (fRec14[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec14[1]) : fRec14[1] * static_cast<double>((fRec14[1] > 0.0) - (fRec14[1] < 0.0)) + -0.5)) / fTemp79);
			double fTemp80 = fRec1[1] + fRec3[1];
			double fTemp81 = fRec5[1] + fRec7[1];
			double fTemp82 = fTemp43 + fTemp50;
			double fTemp83 = fTemp54 - fTemp57;
			double fTemp84 = fTemp82 - fTemp83;
			double fTemp85 = fTemp60 - fTemp61;
			double fTemp86 = fTemp63 - fTemp64;
			double fTemp87 = fTemp85 - fTemp86;
			fVec29[IOTA0 & 4095] = fTemp84 - fTemp87;
			fVec30[IOTA0 & 16383] = fTemp4 * (fRec4[1] + fRec2[1] + fTemp80 - (fRec8[1] + fRec6[1] + fTemp81)) - 0.01 * fVec29[(IOTA0 - iConst38) & 4095];
			double fTemp88 = fVec30[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07019600000000001)))))) & 16383];
			fVec31[0] = fTemp88;
			fRec15[0] = -(fConst5 * (fConst6 * fRec15[1] - (fTemp88 + fVec31[1])));
			double fTemp89 = fRec15[0] - fRec15[1];
			fRec5[0] = ((std::fabs(fTemp89) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec15[0] + fRec15[1]))) : ((((fRec15[0] <= 1.0) & (fRec15[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec15[0]) : fRec15[0] * static_cast<double>((fRec15[0] > 0.0) - (fRec15[0] < 0.0)) + -0.5) - (((fRec15[1] <= 1.0) & (fRec15[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec15[1]) : fRec15[1] * static_cast<double>((fRec15[1] > 0.0) - (fRec15[1] < 0.0)) + -0.5)) / fTemp89);
			fVec32[IOTA0 & 8191] = fTemp84 + fTemp87;
			fVec33[IOTA0 & 16383] = fTemp4 * (fRec8[1] + fRec6[1] + fTemp80 - (fRec4[1] + fRec2[1] + fTemp81)) - 0.01 * fVec32[(IOTA0 - iConst39) & 8191];
			double fTemp90 = fVec33[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07030800000000001)))))) & 16383];
			fVec34[0] = fTemp90;
			fRec16[0] = -(fConst5 * (fConst6 * fRec16[1] - (fTemp90 + fVec34[1])));
			double fTemp91 = fRec16[0] - fRec16[1];
			fRec6[0] = ((std::fabs(fTemp91) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec16[0] + fRec16[1]))) : ((((fRec16[0] <= 1.0) & (fRec16[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec16[0]) : fRec16[0] * static_cast<double>((fRec16[0] > 0.0) - (fRec16[0] < 0.0)) + -0.5) - (((fRec16[1] <= 1.0) & (fRec16[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec16[1]) : fRec16[1] * static_cast<double>((fRec16[1] > 0.0) - (fRec16[1] < 0.0)) + -0.5)) / fTemp91);
			double fTemp92 = fRec1[1] + fRec7[1];
			double fTemp93 = fRec5[1] + fRec3[1];
			double fTemp94 = fTemp82 + fTemp83;
			double fTemp95 = fTemp85 + fTemp86;
			fVec35[IOTA0 & 8191] = fTemp94 - fTemp95;
			fVec36[IOTA0 & 16383] = fTemp4 * (fRec8[1] + fRec2[1] + fTemp92 - (fRec4[1] + fRec6[1] + fTemp93)) + 0.01 * fVec35[(IOTA0 - iConst40) & 8191];
			double fTemp96 = fVec36[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07036400000000001)))))) & 16383];
			fVec37[0] = fTemp96;
			fRec17[0] = -(fConst5 * (fConst6 * fRec17[1] - (fTemp96 + fVec37[1])));
			double fTemp97 = fRec17[0] - fRec17[1];
			fRec7[0] = ((std::fabs(fTemp97) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec17[0] + fRec17[1]))) : ((((fRec17[0] <= 1.0) & (fRec17[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec17[0]) : fRec17[0] * static_cast<double>((fRec17[0] > 0.0) - (fRec17[0] < 0.0)) + -0.5) - (((fRec17[1] <= 1.0) & (fRec17[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec17[1]) : fRec17[1] * static_cast<double>((fRec17[1] > 0.0) - (fRec17[1] < 0.0)) + -0.5)) / fTemp97);
			fVec38[IOTA0 & 8191] = fTemp94 + fTemp95;
			fVec39[IOTA0 & 16383] = fTemp4 * (fRec4[1] + fRec6[1] + fTemp92 - (fRec8[1] + fRec2[1] + fTemp93)) - 0.01 * fVec38[(IOTA0 - iConst41) & 8191];
			double fTemp98 = fVec39[(IOTA0 - static_cast<int>(std::min<double>(fConst35, std::max<double>(0.0, std::round(fConst0 * (fTemp68 + 0.07047600000000001)))))) & 16383];
			fVec40[0] = fTemp98;
			fRec18[0] = -(fConst5 * (fConst6 * fRec18[1] - (fTemp98 + fVec40[1])));
			double fTemp99 = fRec18[0] - fRec18[1];
			fRec8[0] = ((std::fabs(fTemp99) <= 0.001) ? std::max<double>(-1.0, std::min<double>(1.0, 0.5 * (fRec18[0] + fRec18[1]))) : ((((fRec18[0] <= 1.0) & (fRec18[0] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec18[0]) : fRec18[0] * static_cast<double>((fRec18[0] > 0.0) - (fRec18[0] < 0.0)) + -0.5) - (((fRec18[1] <= 1.0) & (fRec18[1] >= -1.0)) ? 0.5 * OtReverb_faustpower2_f(fRec18[1]) : fRec18[1] * static_cast<double>((fRec18[1] > 0.0) - (fRec18[1] < 0.0)) + -0.5)) / fTemp99);
			double fTemp100 = fRec1[0] + fRec2[0] + fRec3[0] + fRec4[0] + fRec5[0] + fRec6[0] + fRec7[0] + fRec8[0];
			fVec41[0] = fTemp100;
			fRec0[0] = -(fConst2 * (fConst3 * fRec0[1] - fConst1 * (fTemp100 - fVec41[1])));
			fRec19[0] = fSlow2 + fConst8 * fRec19[1];
			output0[i0] = static_cast<float>(fTemp0 + 0.05230769230769231 * fRec0[0] * std::max<double>(0.0, std::min<double>(1e+01, 1e+01 * fRec19[0])));
			IOTA0 = IOTA0 + 1;
			fRec10[1] = fRec10[0];
			fRec11[1] = fRec11[0];
			fVec19[1] = fVec19[0];
			fRec9[1] = fRec9[0];
			fRec1[1] = fRec1[0];
			fVec22[1] = fVec22[0];
			fRec12[1] = fRec12[0];
			fRec2[1] = fRec2[0];
			fVec25[1] = fVec25[0];
			fRec13[1] = fRec13[0];
			fRec3[1] = fRec3[0];
			fVec28[1] = fVec28[0];
			fRec14[1] = fRec14[0];
			fRec4[1] = fRec4[0];
			fVec31[1] = fVec31[0];
			fRec15[1] = fRec15[0];
			fRec5[1] = fRec5[0];
			fVec34[1] = fVec34[0];
			fRec16[1] = fRec16[0];
			fRec6[1] = fRec6[0];
			fVec37[1] = fVec37[0];
			fRec17[1] = fRec17[0];
			fRec7[1] = fRec7[0];
			fVec40[1] = fVec40[0];
			fRec18[1] = fRec18[0];
			fRec8[1] = fRec8[0];
			fVec41[1] = fVec41[0];
			fRec0[1] = fRec0[0];
			fRec19[1] = fRec19[0];
		}
	}

	inline void calculateSizes() {
		auto knobWidth = OtUi::knobWidth();
		auto knobHeight = OtUi::knobHeight();
		auto spacing = ImGui::GetStyle().ItemSpacing.x;
		width1 += knobWidth;
		height1 = std::max(height1, knobHeight);
		width1 += spacing;
		width1 += knobWidth;
		height1 = std::max(height1, knobHeight);
		width1 += spacing;
		width1 += knobWidth;
		height1 = std::max(height1, knobHeight);
		initialized = true;
	}

	inline bool renderUI() {
		if (!initialized) {
			calculateSizes();
		}

		bool changed = false;
		ImGui::BeginChild("Reverb", ImVec2(), ImGuiChildFlags_AutoResizeX | ImGuiChildFlags_AutoResizeY);
		changed |= OtUi::knob("Dwell", &fVslider0, 0.0f, 1.0f, "%.2f");
		ImGui::SameLine();
		changed |= OtUi::knob("Tension", &fVslider1, 0.0f, 1.0f, "%.2f");
		ImGui::SameLine();
		changed |= OtUi::knob("Blend", &fVslider2, 0.0f, 1.0f, "%.2f");
		ImGui::EndChild();
		return changed;
	}

	inline float getRenderWidth() {
		if (!initialized) {
			calculateSizes();
		}

		return width1;
	}

	inline float getRenderHeight() {
		if (!initialized) {
			calculateSizes();
		}

		return height1;
	}

	struct Parameters {
		float dwell = 0.2f;
		float tension = 0.0f;
		float blend = 0.5f;
	};

	inline void setParameters([[maybe_unused]] const Parameters& parameters) {
		fVslider0 = parameters.dwell;
		fVslider1 = parameters.tension;
		fVslider2 = parameters.blend;
	}

	inline Parameters getParameters() {
		Parameters parameters;
		parameters.dwell = fVslider0;
		parameters.tension = fVslider1;
		parameters.blend = fVslider2;
		return parameters;
	}

	inline void iterateParameters([[maybe_unused]] std::function<void(const char*, float*, float)> callback) override {
		callback("dwell", &fVslider0, 0.2f);
		callback("tension", &fVslider1, 0.0f);
		callback("blend", &fVslider2, 0.5f);
	}

	inline void setDwell(float value) { fVslider0 = value; }
	inline void setTension(float value) { fVslider1 = value; }
	inline void setBlend(float value) { fVslider2 = value; }

	inline float getDwell() { return fVslider0; }
	inline float getTension() { return fVslider1; }
	inline float getBlend() { return fVslider2; }

private:
	bool initialized = false;
	float width1;
	float height1;
};
